import re
import sys
import time

from utils.filter_util import Filters as f


abc_db = [
    {"Ð°": [
        "A", "a", "2", "0", "Ð°", "Ð", "ð•’", "ð”¸"
    ]},
    {"Ð±": [
        "B", "b", "8", "6", "Ð‘", "Ð±", "ð•“", "ð”¹"
    ]},
    {"Ð²": [
        "B", "8", "V", "v", "Ð’", "Ð²", "ð•§", "ð•"
    ]},
    {"Ð³": [
        "G", "g", "7", "Ð“", "Ð³", "ð•˜", "ð”¾"
    ]},
    {"Ð´": [
        "D", "d", "Ð”", "Ð´", "ð••", "ð”»"
    ]},
    {"Ðµ": [
        "E", "e", "3", "Ð•", "Ðµ", "ð•–", "ð”¼"
    ]},
    {"Ñ‘": [
        "Ð•", "Ðµ", "E", "e", "3", "ð•–", "ð”¼"
    ]},
    {"Ð¶": {
        "ZH", "zh", "Ð–", "Ð¶", "ð•«ð•™", "â„¤â„"
    }},
    {"Ð·": [
        "Z", "z", "3", "Ð—", "Ð—", "ð•«", "â„¤"
    ]},
    {"Ð¸": [
        "N", "u", "U", "i", "II", "Ð˜", "Ð¸", "ð•š", "ð•€"
    ]},
    {"Ð¹": [
        "N", "u", "U", "i", "II", "Ð¹", "Ð¹", "ÑŒÐ¸", "Ð¬Ð˜", "ð•š", "ð•€"
    ]},
    {"Ðº": [
        "K", "Ðº", "Ðš", "Ðº", "ð•œ", "ð•‚"
    ]},
    {"Ð»": [
        "L", "l", "Il", "il", "Ð›", "Ð»", "ð•", "ð•ƒ"
    ]},
    {"Ð¼": [
        "M", "m", "Ðœ", "Ð¼", "ð•ž", "ð•„"
    ]},
    {"Ð½": [
        "N", "n", "H", "Ð", "Ð½", "ð•Ÿ", "â„•"
    ]},
    {"Ð¾": [
        "O", "o", "0", "Ðž", "Ð¾", "ð• ", "ð•†"
    ]},
    {"Ð¿": [
        "P", "p", "5", "ÐŸ", "Ð¿", "ð•¡", "â„™"
    ]},
    {"Ñ€": [
        "P", "p", "Ð ", "Ñ€", "ð•¡", "ð•£", "r", "R", "â„™", "â„", "ð•£"
    ]},
    {"Ñ": [
        "S", "s", "3", "Ð¡", "Ñ", "ð•¤", "ð•Š"
    ]},
    {"Ñ‚": [
        "T", "t", "2", "Ð¢", "Ñ‚", "ð•¥", "ð•‹"
    ]},
    {"Ñƒ": [
        "Y", "y", "U", "u", "Ð£", "Ð£", "ð•ª", "ð•"
    ]},
    {"Ñ„": [
        "F", "f", "Ð¤", "Ñ„", "ð•—", "ð”½"
    ]},
    {"Ñ…": [
        "X", "x", "h", "H", "Ð¥", "Ñ…", "ð•™", "â„"
    ]},
    {"Ñ†": [
        "Ð¦", "Ñ†"
    ]},
    {"Ñ‡": [
        "CH", "ch", "4", "Ð§", "Ñ‡", "ð•”ð•™", "â„‚â„"
    ]},
    {"Ñˆ": [
        "SH", "sh", "6", "Ñˆ", "Ð¨", "W", "w", "ð•¤ð•™", "ð•¨", "ð•Ž"
    ]},
    {"Ñ‰": [
        "SH", "sh", "Ð©", "Ñ‰", "ð•¤ð•™", "ð•Šâ„"
    ]},
    {"ÑŒ": [
        "b", "Ð¬", "ÑŒ", "6"
    ]},
    {"Ñ‹": {
        "bI", "bl", "Ð«", "Ð«", "ð•“ð•", "ð•“ð•€"
    }},
    {"ÑŠ": [
        "ÑŠ", "Ðª"
    ]},
    {"Ñ": [
        "E", "e", "3", "Ñ", "Ð­", "ð”¼", "ð•–"
    ]},
    {"ÑŽ": [
        "YU", "yu", "ÑŽ", "Ð®", "U", "u", "ð•ªð•¦", "ð•ð•Œ"
    ]},
    {"Ñ": [
        "Ð¯", "Ñ", "YA", "ya", "Z", "z", "ð•«", "â„¤"
    ]}
]


def detect_bad_word(inp_msg: str, file: str) -> any:
    with open(f'{file}', 'r', encoding='utf-8') as _f:
        _bl = re.split(r'[,\s]+', _f.read())
        print(f"ConvertedToRu: {f.convert_to_ru(inp_msg, abc_db)}\n")
        for _w in _bl:
            if _w in f.convert_to_ru(inp_msg, abc_db):
                print(f"Found: {_w}")
                return True
        return False


if __name__ == '__main__':
    start_time = time.perf_counter()
    print(f"Line: {sys.argv[1]}")
    print(f"File: {sys.argv[2]}")
    print(f"Result: {str(detect_bad_word(sys.argv[1], sys.argv[2]))}")
    end_time = time.perf_counter()
    print(f"Execution time: {end_time - start_time:.3f} seconds")
